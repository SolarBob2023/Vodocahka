import{_ as D,d as V,g as _,h as C,r as F,i as L,o as s,c as d,j as S,a as u,e as b,n as w,b as g,t as f,F as G,k as y,f as T}from"./index-db0557d3.js";import{s as P,b as h,a as c,c as $,d as v,o as E,e as z,f as B}from"./vue-datepicker-f82f5bac.js";import{r as H,d as k}from"./main-f1c8270c.js";function M(t,e,a){H(2,arguments);var n=P(t,a),i=P(e,a);return n.getTime()===i.getTime()}function m(t,e){if(t.one!==void 0&&e===1)return t.one;var a=e%10,n=e%100;return a===1&&n!==11?t.singularNominative.replace("{{count}}",String(e)):a>=2&&a<=4&&(n<10||n>20)?t.singularGenitive.replace("{{count}}",String(e)):t.pluralGenitive.replace("{{count}}",String(e))}function r(t){return function(e,a){return a!=null&&a.addSuffix?a.comparison&&a.comparison>0?t.future?m(t.future,e):"через "+m(t.regular,e):t.past?m(t.past,e):m(t.regular,e)+" назад":m(t.regular,e)}}var X={lessThanXSeconds:r({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:r({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(e,a){return a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:r({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:r({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:r({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:r({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:r({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:r({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:r({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:r({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:r({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:r({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:r({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:r({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:r({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},R=function(e,a,n){return X[e](a,n)};const x=R;var O={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},U={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Y={any:"{{date}}, {{time}}"},q={date:h({formats:O,defaultWidth:"full"}),time:h({formats:U,defaultWidth:"full"}),dateTime:h({formats:Y,defaultWidth:"any"})};const A=q;var p=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function j(t){var e=p[t];switch(t){case 0:return"'в прошлое "+e+" в' p";case 1:case 2:case 4:return"'в прошлый "+e+" в' p";case 3:case 5:case 6:return"'в прошлую "+e+" в' p"}}function N(t){var e=p[t];return t===2?"'во "+e+" в' p":"'в "+e+" в' p"}function I(t){var e=p[t];switch(t){case 0:return"'в следующее "+e+" в' p";case 1:case 2:case 4:return"'в следующий "+e+" в' p";case 3:case 5:case 6:return"'в следующую "+e+" в' p"}}var Q={lastWeek:function(e,a,n){var i=e.getUTCDay();return M(e,a,n)?N(i):j(i)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:function(e,a,n){var i=e.getUTCDay();return M(e,a,n)?N(i):I(i)},other:"P"},J=function(e,a,n,i){var l=Q[e];return typeof l=="function"?l(a,n,i):l};const K=J;var Z={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},ee={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},te={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},ae={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},ne={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},ie={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},re={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},ue=function(e,a){var n=Number(e),i=a==null?void 0:a.unit,l;return i==="date"?l="-е":i==="week"||i==="minute"||i==="second"?l="-я":l="-й",n+l},oe={ordinalNumber:ue,era:c({values:Z,defaultWidth:"wide"}),quarter:c({values:ee,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:c({values:te,defaultWidth:"wide",formattingValues:ae,defaultFormattingWidth:"wide"}),day:c({values:ne,defaultWidth:"wide"}),dayPeriod:c({values:ie,defaultWidth:"any",formattingValues:re,defaultFormattingWidth:"wide"})};const le=oe;var se=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,de=/\d+/i,ce={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},ve={any:[/^д/i,/^н/i]},me={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},ge={any:[/1/i,/2/i,/3/i,/4/i]},fe={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},he={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},pe={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},be={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},we={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},Ge={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},ye={ordinalNumber:$({matchPattern:se,parsePattern:de,valueCallback:function(e){return parseInt(e,10)}}),era:v({matchPatterns:ce,defaultMatchWidth:"wide",parsePatterns:ve,defaultParseWidth:"any"}),quarter:v({matchPatterns:me,defaultMatchWidth:"wide",parsePatterns:ge,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:v({matchPatterns:fe,defaultMatchWidth:"wide",parsePatterns:he,defaultParseWidth:"any"}),day:v({matchPatterns:pe,defaultMatchWidth:"wide",parsePatterns:be,defaultParseWidth:"any"}),dayPeriod:v({matchPatterns:we,defaultMatchWidth:"wide",parsePatterns:Ge,defaultParseWidth:"any"})};const Pe=ye;var ke={code:"ru",formatDistance:x,formatLong:A,formatRelative:K,localize:le,match:Pe,options:{weekStartsOn:1,firstWeekContainsDate:1}};const Me=ke,Ne=V({name:"BillView",components:{VueDatePicker:E},data(){return{month:{month:new Date().getMonth()-1,year:new Date().getFullYear()},bills:{data:null,links:null}}},computed:{ru(){return Me},maxPeriod(){const t=new Date(2022,1,1),e=new Date(new Date().getFullYear(),new Date().getMonth(),1);return k(e,t)+2},period(){const t=new Date(2022,1,1),e=new Date(this.month.year,this.month.month,1);return k(e,t)+2},isValidPeriod(){return this.period<=this.maxPeriod&&this.period>0}},methods:{addMonths:z,format:B,..._(T,{storeError:"storeError"}),async getBills(t=1){try{const e=await C.get(`/api/admin/bills/${this.period}?page=${t}`);e.status===200&&e.data&&(this.bills.data=e.data.data,this.bills.links=e.data.meta.links,this.bills.links.forEach(a=>{if(a.url){const n=new URL(a.url);a.page=n.searchParams.get("page")}else a.page=null}))}catch(e){this.storeError(e),F.push({name:"error"})}}}}),We={class:"row"},De=u("div",{class:"mt-2"},"Выставленные счета",-1),Ve={key:0,class:"mt-2"},_e=u("p",{class:"text-danger"},"За выбранный период не выставлены счета",-1),Ce=[_e],Fe={key:1,class:"mt-2"},Le={class:"text-danger"},Se={key:2,class:"mt-2"},Te={class:"table"},$e=u("thead",null,[u("tr",null,[u("th",{scope:"col"},"ФИО дачника"),u("th",{scope:"col"},"Сумма")])],-1),Ee={"aria-label":"Page navigation example"},ze={class:"pagination justify-content-center"},Be=["onClick","innerHTML"];function He(t,e,a,n,i,l){const W=L("VueDatePicker");return s(),d("div",We,[De,S(W,{class:"mt-2",modelValue:t.month,"onUpdate:modelValue":e[0]||(e[0]=o=>t.month=o),"month-picker":"","auto-apply":""},null,8,["modelValue"]),u("a",{onClick:e[1]||(e[1]=b(o=>t.getBills(),["prevent"])),class:w("btn btn-primary mt-2 "+(t.isValidPeriod?"":"disabled")),href:"#"}," Показать ",2),t.bills.data&&t.bills.data.length===0?(s(),d("div",Ve,Ce)):g("",!0),t.isValidPeriod?g("",!0):(s(),d("div",Fe,[u("p",Le,"Период должен быть позднее января 2022 года и раньше "+f(t.format(t.addMonths(new Date,1),"MMMM",{locale:t.ru}))+" текущего года",1)])),t.bills.data&&t.bills.data.length>0?(s(),d("div",Se,[u("table",Te,[$e,u("tbody",null,[(s(!0),d(G,null,y(t.bills.data,o=>(s(),d("tr",{key:o.id},[u("th",null,f(o.resident.fio),1),u("td",null,f(o.bill),1)]))),128))])]),u("nav",Ee,[u("ul",ze,[(s(!0),d(G,null,y(t.bills.links,o=>(s(),d("li",{key:o.label,class:w("page-item "+(o.active?"active ":"")+(o.url?"":"disabled"))},[u("a",{onClick:b(Xe=>t.getBills(o.page),["prevent"]),class:"page-link",href:"#",innerHTML:o.label},null,8,Be)],2))),128))])])])):g("",!0)])}const Ue=D(Ne,[["render",He]]);export{Ue as default};
